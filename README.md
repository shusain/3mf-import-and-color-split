# 🧩 Bambu 3MF Importer for Blender

This Blender add-on allows importing `.3mf` files generated by **Bambu Studio**, preserving paint-based coloring via either:

* 🎨 **Material assignments** (for color-preserving `.obj` export back to Bambu Studio)
* 🎨 **Vertex colors** (for flexible editing and color-based selection in Blender)

It also identifies colored regions and auto-generates a bounding box to isolate them with optional Boolean modifiers.

---

## 🔧 Features

* Extracts `paint_color` triangle info from `.3mf` model XML
* Maps to actual Bambu filament colors via `slice_info.config`
* Supports **blended colors** (averaging for multi-color triangles)
* Merges similar RGBs into shared materials (with configurable threshold)
* Triangulates boolean result meshes to avoid ngons
* Two import paths:

  * Material-based: Great for exporting `.obj` back to Bambu
  * Vertex-colored: Better for editing inside Blender

---

## 📦 Installation Instructions

1. In Blender:

   * Open `Edit` → `Preferences` → `Add-ons`
   * Click **Install...**
   * Select the `.zip` file of this add-on
   * Enable ✅ **Bambu 3MF Importer**

2. File → Import → Choose either:

   * `Bambu 3MF (.3mf) - Material Colors`
   * `Bambu 3MF (.3mf) - Vertex Colors`

---

## ✍️ Usage Notes

### ✅ Recommended Path (for Bambu roundtrip)

* Use **Material Coloring** import
* Keep `Apply Boolean Modifiers` checked to get `Colored_Region` and `Uncolored_Region` separated
* Export the `Colored_Region` as `.obj` back into Bambu Studio (colors will be retained)

### ✏️ Manual Bounding Box Editing

To manually adjust the bounding box:

1. Uncheck **"Apply Boolean Modifiers"** in the import dialog
2. Select the `Color_BBox` object
3. Use **scale** or **transform** tools to adjust it
4. Select the main mesh, then apply Boolean modifiers manually:

   * `Object` mode → Select mesh
   * `Modifier Properties` → Apply
5. With resulting mesh selected:

   * Go to `Edit Mode`
   * Select all (A)
   * `Face` → `Triangulate Faces`

---

## 🧪 Development & Auto-Build (Coming Soon)

A GitHub Actions workflow is planned to:

* Automatically zip the add-on on push to `main`
* Create release artifacts with version tagging

---


## 🚀 GitHub Actions CI

This repository includes a CI pipeline (`release.yml`) that:

- Watches for changes on the `main` branch
- Automatically zips your Blender add-on files:
  - `__init__.py`
  - `import_3_mf_color.py`
  - `import_3mf_vertex_colored.py`
- Uploads a GitHub Release with the zipped plugin

### 🔄 Releasing

Every push to `main` will automatically:

1. Create a new ZIP archive named `bambu_3mf_importer.zip`
2. Publish a GitHub Release with a timestamp-based tag (e.g., `auto-2025-07-16T15-00-00`)

You can download the latest `.zip` from the [Releases](https://github.com/shusain/3mf-import-and-color-split/releases) tab.

---

## 📁 File Structure

```
bambu_3mf_importer/
├── __init__.py
├── import_3_mf_color.py
├── import_3mf_vertex_colored.py
└── README.md
```
